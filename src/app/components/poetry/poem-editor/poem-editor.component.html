<app-card padding="large" class="editor-card">
  <div class="editor-container">
    
    <header class="editor-header">
      <h1 class="editor-title">poetry editor</h1>
      <div class="form-selector">
        <app-select
          [id]="'poetry-form-selector'"
          [options]="formOptions"
          [value]="selectedForm()"
          (selectChange)="onFormChange($event)"
        />
      </div>
    </header>

    <div class="stats-panel-minimal">
      <div class="stat-minimal">
        <span class="stat-minimal-value">{{ lineCount() }}</span>
        <span class="stat-minimal-label">lines</span>
      </div>
      <div class="stat-minimal">
        <span class="stat-minimal-value">{{ totalSyllables() }}</span>
        <span class="stat-minimal-label">syllables</span>
      </div>
      <div class="stat-minimal">
        <span class="stat-minimal-value">{{ Math.min(syllableProgress(), 100).toFixed(0) }}%</span>
        <span class="stat-minimal-label">complete</span>
      </div>
    </div>

    <section class="editor-section" [style.height]="editorHeight()">
      <app-multiline-input
        id="poem-editor"
        [placeholder]="getCurrentPlaceholder()"
        [rows]="expectedLines()"
        [value]="poemText()"
        [showLineNumbers]="true"
        [showLineValidation]="true"
        [expectedPattern]="currentPattern()"
        (valueChange)="onTextChange($event)"
        [class]="getResponsiveFontClass()"
      />
    </section>

    <footer class="editor-actions">
      <app-button
        variant="primary"
        size="medium"
        label="analyze"
        icon="icon-[iconoir--search]"
        [disabled]="!isReadyForAnalysis()"
        (clicked)="analyze()"
      />

      <app-button
        variant="outline"
        size="medium"
        label="example"
        icon="icon-[iconoir--page]"
        (clicked)="loadExample()"
      />

      <app-button
        variant="outline"
        size="medium"
        label="clear"
        icon="icon-[iconoir--cancel]"
        (clicked)="clear()"
      />

      <app-button
        variant="outline"
        size="medium"
        label="copy"
        icon="icon-[iconoir--copy]"
        (clicked)="onCopyPoem()"
      />
    </footer>

  </div>
</app-card>