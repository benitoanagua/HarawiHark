<article class="page-container">
  <app-header />

  <section class="page-content">
    <div class="hero-section">
      <div class="hero-icon-container">
        <span class="icon-[iconoir--flower] hero-icon"></span>
        <h1 class="hero-title">harawihark</h1>
      </div>
      <p class="hero-subtitle">
        advanced syllable-meter checker with AI-powered suggestions
      </p>
    </div>

    <div class="editor-section">
      <app-poem-editor />
    </div>

    <div class="generation-actions" *ngIf="!analyzer.result()">
      <div class="actions-grid">
        <app-button
          variant="secondary"
          size="medium"
          label="generate poem"
          icon="icon-[iconoir--magic-wand]"
          (clicked)="onGeneratePoem()"
          [disabled]="analyzer.isLoading()"
        />
        
        <app-button
          variant="outline"
          size="medium"
          label="use template"
          icon="icon-[iconoir--page]"
          (clicked)="analyzer.loadExample()"
        />
      </div>
    </div>

    @if (analyzer.generatedPoem(); as generated) {
      <div class="generated-section">
        <app-card padding="large">
          <div class="generated-container">
            <h3 class="generated-title">generated poem</h3>
            <div class="generated-poem">
              @for (line of generated; track $index) {
                <p class="generated-line">{{ line }}</p>
              }
            </div>
            <div class="generated-actions">
              <app-button
                variant="primary"
                size="small"
                label="use this poem"
                icon="icon-[iconoir--check]"
                (clicked)="onUseGeneratedPoem()"
              />
              <app-button
                variant="outline"
                size="small"
                label="generate another"
                icon="icon-[iconoir--refresh]"
                (clicked)="onGeneratePoem()"
              />
            </div>
          </div>
        </app-card>
      </div>
    }

    @if (analyzer.wordAlternatives(); as alternatives) {
      <div class="suggestions-section">
        <app-word-suggestions
          [data]="alternatives"
          (replaceWord)="onReplaceWord($event)"
          (closeSuggestions)="onCloseSuggestions()"
        />
      </div>
    }

    @if (analyzer.result(); as result) {
      <div class="results-section">
        <app-poem-results
          [result]="result"
          (wordSelected)="onWordSelected($event)"
        />

        <div class="advanced-actions">
          <div class="actions-row">
            <app-button
              variant="secondary"
              size="medium"
              label="assess quality"
              icon="icon-[iconoir--star]"
              (clicked)="onAssessQuality()"
            />
            
            <app-button
              variant="outline"
              size="medium"
              label="generate variations"
              icon="icon-[iconoir--view-grid]"
              (clicked)="onGenerateVariations()"
              [disabled]="analyzer.isLoading()"
            />
            
            <app-button
              variant="outline"
              size="medium"
              label="export poem"
              icon="icon-[iconoir--cloud-download]"
              (clicked)="onExportPoem()"
            />
          </div>
        </div>

        @if (showQuality() && analyzer.qualityMetrics()) {
          <div class="quality-section">
            <app-poem-quality [metrics]="analyzer.qualityMetrics()!" />
          </div>
        }

        @if (showVariations() && analyzer.poemVariations().length > 0) {
          <div class="variations-section">
            <app-card padding="large">
              <div class="variations-container">
                <h3 class="variations-title">poem variations</h3>
                <div class="variations-grid">
                  @for (lineVariations of analyzer.poemVariations(); track $index; let i = $index) {
                    <div class="line-variations">
                      <h4 class="line-title">line {{ i + 1 }} alternatives</h4>
                      <div class="variation-list">
                        @for (variation of lineVariations; track $index) {
                          <div class="variation-item">
                            <span class="variation-text">{{ variation }}</span>
                            <app-button
                              variant="outline"
                              size="small"
                              label="use"
                              (clicked)="onUseVariation(i, variation)"
                            />
                          </div>
                        }
                      </div>
                    </div>
                  }
                </div>
              </div>
            </app-card>
          </div>
        }
      </div>
    } @else {
      <div class="empty-state-section">
        <app-card padding="large">
          <div class="empty-content">
            <span class="icon-[iconoir--flower] empty-icon"></span>
            <h3 class="empty-title">ready to analyze</h3>
            <p class="empty-description">
              Write your poem or generate one to see syllable analysis and suggestions
            </p>
          </div>
        </app-card>
      </div>
    }

    <div class="info-section">
      <div class="info-content">
        <span class="icon-[iconoir--light-bulb] info-icon"></span>
        <div class="info-text">
          <h4 class="info-title">how it works</h4>
          <p class="info-description">
            Harawihark uses advanced phonetic analysis to count syllables accurately, 
            detect rhyme schemes, and provide intelligent suggestions for improving your poetry.
          </p>
          <ul class="info-features">
            <li>Real-time syllable counting with RiTa.js</li>
            <li>8 different poetic forms supported</li>
            <li>AI-powered word suggestions and variations</li>
            <li>Quality assessment with detailed metrics</li>
          </ul>
        </div>
      </div>
    </div>
  </section>
</article>